<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Script de Resembrado (Reseed)</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
            background: #f4f4f4;
        }

        pre {
            background: #222;
            color: #fff;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }

        code {
            font-family: monospace;
        }

        h2 {
            color: #333;
        }
    </style>
</head>

<body>
    <h2>Script de Restauración de Soporte (reseed_support.py)</h2>
    <p>Este script fuerza la ejecución del <code>seed_database()</code> para recrear la empresa de demostración y el
        usuario de soporte si no existen.</p>

    <pre><code>
import sys
import os

# Add the project root to the python path
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))

from app.core.seeder import seed_database
from app.core.database import SessionLocal
from app.models.usuario import Usuario

def force_reseed():
    print("--- FORZANDO RE-SEMBRADO DE SOPORTE ---")
    try:
        # Run standard seeder
        seed_database()
        
        # Verify
        db = SessionLocal()
        soporte = db.query(Usuario).filter(Usuario.email == "soporte@soporte.com").first()
        if soporte:
            print(f"✅ Usuario de Soporte Restaurado: {soporte.email}")
        else:
            print("❌ ERROR: El usuario de soporte no aparece tras el sembrado.")
        db.close()
        
    except Exception as e:
        print(f"❌ ERROR CRÍTICO: {e}")

if __name__ == "__main__":
    force_reseed()
    </code></pre>
</body>

</html>