<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentaci√≥n - M√≥dulo de Facturaci√≥n | Sistema Finaxis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            color: #667eea;
            font-size: 3em;
            margin-bottom: 10px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header .subtitle {
            color: #764ba2;
            font-size: 1.3em;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .header .description {
            color: #666;
            font-size: 1.1em;
            max-width: 800px;
            margin: 0 auto;
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        }

        .card h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h3 {
            color: #764ba2;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 8px;
        }

        .feature-list {
            list-style: none;
            padding: 0;
        }

        .feature-list li {
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feature-list li:last-child {
            border-bottom: none;
        }

        .feature-list li::before {
            content: "‚úÖ";
            font-size: 1.2em;
        }

        .highlight-box {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .highlight-box h4 {
            font-size: 1.3em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .warning-box {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.3);
        }

        .warning-box h4 {
            font-size: 1.3em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tech-specs {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
        }

        .tech-specs h4 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .spec-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .spec-table th,
        .spec-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .spec-table th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: 600;
        }

        .spec-table tr:hover {
            background-color: #f5f5f5;
        }

        .endpoint-badge {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 500;
            display: inline-block;
            margin: 2px;
        }

        .method-get { background: linear-gradient(135deg, #28a745, #20c997); }
        .method-post { background: linear-gradient(135deg, #007bff, #6610f2); }
        .method-put { background: linear-gradient(135deg, #ffc107, #fd7e14); }
        .method-delete { background: linear-gradient(135deg, #dc3545, #e83e8c); }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .feature-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
        }

        .feature-item:hover {
            transform: translateX(5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }

        .feature-item h5 {
            color: #667eea;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .feature-item p {
            color: #666;
            font-size: 0.95em;
        }

        .conclusion {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin-top: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        .conclusion h2 {
            color: #667eea;
            font-size: 2.2em;
            margin-bottom: 20px;
        }

        .conclusion p {
            color: #666;
            font-size: 1.1em;
            max-width: 800px;
            margin: 0 auto 20px auto;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-item {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: 700;
            display: block;
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.9;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
            
            .content-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .card {
                padding: 25px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üìÑ M√≥dulo de Facturaci√≥n</h1>
            <div class="subtitle">Sistema Integral de Facturaci√≥n Electr√≥nica</div>
            <div class="description">
                M√≥dulo completo para la gesti√≥n de facturaci√≥n de ventas con integraci√≥n autom√°tica de contabilidad, 
                inventario, an√°lisis de rentabilidad y generaci√≥n de reportes avanzados. Cumple con normativas 
                colombianas de facturaci√≥n electr√≥nica.
            </div>
        </div>

        <!-- Content Grid -->
        <div class="content-grid">
            <!-- Creaci√≥n de Facturas -->
            <div class="card">
                <h2>üßæ Creaci√≥n de Facturas de Venta</h2>
                <p>Sistema robusto para la creaci√≥n de facturas de venta con validaciones autom√°ticas y integraci√≥n completa.</p>
                
                <h3>Caracter√≠sticas Principales</h3>
                <ul class="feature-list">
                    <li>Validaci√≥n autom√°tica de stock y disponibilidad</li>
                    <li>C√°lculo autom√°tico de impuestos (IVA)</li>
                    <li>Soporte para ventas de contado y cr√©dito</li>
                    <li>Integraci√≥n con remisiones y cotizaciones</li>
                    <li>Manejo de m√∫ltiples bodegas</li>
                    <li>Asientos contables autom√°ticos</li>
                </ul>

                <div class="tech-specs">
                    <h4>üîß Especificaciones T√©cnicas</h4>
                    <table class="spec-table">
                        <tr>
                            <th>Endpoint</th>
                            <td><span class="endpoint-badge method-post">POST</span> /api/facturacion/</td>
                        </tr>
                        <tr>
                            <th>Modelo Principal</th>
                            <td>FacturaCreate</td>
                        </tr>
                        <tr>
                            <th>Servicio</th>
                            <td>service_facturacion.crear_factura_venta()</td>
                        </tr>
                        <tr>
                            <th>Validaciones</th>
                            <td>Stock, Cuentas Contables, Cliente</td>
                        </tr>
                    </table>
                </div>

                <div class="highlight-box">
                    <h4>üí° Funcionalidad Destacada</h4>
                    <p>El sistema maneja autom√°ticamente la fecha de vencimiento: para ventas de contado usa la fecha de factura, 
                    para cr√©dito requiere fecha manual obligatoria del usuario.</p>
                </div>
            </div>

            <!-- Integraci√≥n Contable -->
            <div class="card">
                <h2>üìä Integraci√≥n Contable Autom√°tica</h2>
                <p>Generaci√≥n autom√°tica de asientos contables siguiendo principios de contabilidad por partida doble.</p>
                
                <h3>Asientos Generados</h3>
                <div class="feature-grid">
                    <div class="feature-item">
                        <h5>Cuenta por Cobrar / Caja</h5>
                        <p>D√©bito seg√∫n condici√≥n de pago (contado/cr√©dito)</p>
                    </div>
                    <div class="feature-item">
                        <h5>Ingresos por Ventas</h5>
                        <p>Cr√©dito por valor de venta sin impuestos</p>
                    </div>
                    <div class="feature-item">
                        <h5>IVA Generado</h5>
                        <p>Cr√©dito por impuestos calculados</p>
                    </div>
                    <div class="feature-item">
                        <h5>Costo de Ventas</h5>
                        <p>D√©bito por costo promedio de productos</p>
                    </div>
                    <div class="feature-item">
                        <h5>Inventario</h5>
                        <p>Cr√©dito por salida de inventario</p>
                    </div>
                </div>

                <div class="warning-box">
                    <h4>‚ö†Ô∏è Validaciones Cr√≠ticas</h4>
                    <p>El sistema valida que todas las cuentas contables est√©n configuradas antes de permitir la facturaci√≥n. 
                    Esto incluye cuentas de ingresos, costos, inventario e impuestos.</p>
                </div>
            </div>

            <!-- Gesti√≥n de Inventario -->
            <div class="card">
                <h2>üì¶ Gesti√≥n de Inventario</h2>
                <p>Control autom√°tico de inventario con kardex detallado y manejo de stock comprometido.</p>
                
                <h3>Funcionalidades de Inventario</h3>
                <ul class="feature-list">
                    <li>Validaci√≥n de stock disponible en tiempo real</li>
                    <li>Manejo de stock comprometido por remisiones</li>
                    <li>Registro autom√°tico en kardex</li>
                    <li>Actualizaci√≥n de costos promedio</li>
                    <li>Soporte para productos y servicios</li>
                    <li>Control por m√∫ltiples bodegas</li>
                </ul>

                <div class="tech-specs">
                    <h4>üîß L√≥gica de Stock</h4>
                    <table class="spec-table">
                        <tr>
                            <th>Stock F√≠sico</th>
                            <td>Cantidad real en bodega</td>
                        </tr>
                        <tr>
                            <th>Stock Comprometido</th>
                            <td>Reservado por remisiones pendientes</td>
                        </tr>
                        <tr>
                            <th>Stock Disponible</th>
                            <td>F√≠sico - Comprometido</td>
                        </tr>
                        <tr>
                            <th>Movimiento Kardex</th>
                            <td>SALIDA_VENTA con costo promedio</td>
                        </tr>
                    </table>
                </div>
            </div>

            <!-- Reportes de Facturaci√≥n -->
            <div class="card">
                <h2>üìà Reportes de Facturaci√≥n</h2>
                <p>Suite completa de reportes para an√°lisis de ventas, rentabilidad y gesti√≥n comercial.</p>
                
                <h3>Tipos de Reportes</h3>
                <div class="feature-grid">
                    <div class="feature-item">
                        <h5>Reporte Detallado</h5>
                        <p>An√°lisis l√≠nea por l√≠nea de todas las facturas</p>
                    </div>
                    <div class="feature-item">
                        <h5>Rentabilidad por Producto</h5>
                        <p>An√°lisis de m√°rgenes y utilidades por producto</p>
                    </div>
                    <div class="feature-item">
                        <h5>Rentabilidad por Documento</h5>
                        <p>An√°lisis detallado de una factura espec√≠fica</p>
                    </div>
                    <div class="feature-item">
                        <h5>Ventas por Cliente</h5>
                        <p>An√°lisis integral agrupado por cliente</p>
                    </div>
                </div>

                <div class="tech-specs">
                    <h4>üîß Endpoints de Reportes</h4>
                    <table class="spec-table">
                        <tr>
                            <th>Reporte Detallado</th>
                            <td><span class="endpoint-badge method-post">POST</span> /reportes-facturacion/</td>
                        </tr>
                        <tr>
                            <th>Rentabilidad Producto</th>
                            <td><span class="endpoint-badge method-post">POST</span> /reportes-facturacion/rentabilidad-producto</td>
                        </tr>
                        <tr>
                            <th>Rentabilidad Documento</th>
                            <td><span class="endpoint-badge method-post">POST</span> /reportes-facturacion/rentabilidad-documento</td>
                        </tr>
                        <tr>
                            <th>Ventas por Cliente</th>
                            <td><span class="endpoint-badge method-post">POST</span> /reportes-facturacion/ventas-cliente</td>
                        </tr>
                    </table>
                </div>
            </div>

            <!-- An√°lisis de Rentabilidad -->
            <div class="card">
                <h2>üí∞ An√°lisis de Rentabilidad</h2>
                <p>Herramientas avanzadas para el an√°lisis de rentabilidad con c√°lculos autom√°ticos de m√°rgenes y utilidades.</p>
                
                <h3>M√©tricas Calculadas</h3>
                <ul class="feature-list">
                    <li>Utilidad bruta por producto</li>
                    <li>Porcentaje de margen de utilidad</li>
                    <li>Costo promedio vs precio de venta</li>
                    <li>An√°lisis por grupo de inventario</li>
                    <li>Rentabilidad por cliente</li>
                    <li>Comparativos por per√≠odos</li>
                </ul>

                <div class="highlight-box">
                    <h4>üìä F√≥rmulas de Rentabilidad</h4>
                    <p><strong>Utilidad Bruta:</strong> Precio Venta - Costo Promedio<br>
                    <strong>Margen %:</strong> (Utilidad Bruta / Precio Venta) √ó 100<br>
                    <strong>ROI:</strong> (Utilidad / Costo) √ó 100</p>
                </div>
            </div>

            <!-- Generaci√≥n de PDF -->
            <div class="card">
                <h2>üìÑ Generaci√≥n de PDF</h2>
                <p>Sistema robusto para la generaci√≥n de reportes en formato PDF con dise√±o profesional.</p>
                
                <h3>Caracter√≠sticas de PDF</h3>
                <ul class="feature-list">
                    <li>Generaci√≥n directa sin tokens JWT</li>
                    <li>Dise√±o profesional y responsive</li>
                    <li>Tablas con datos detallados</li>
                    <li>Gr√°ficos y m√©tricas visuales</li>
                    <li>Encabezados con informaci√≥n de empresa</li>
                    <li>Descarga autom√°tica con nombres descriptivos</li>
                </ul>

                <div class="tech-specs">
                    <h4>üîß Endpoints PDF</h4>
                    <table class="spec-table">
                        <tr>
                            <th>PDF Detallado</th>
                            <td><span class="endpoint-badge method-post">POST</span> /reportes-facturacion/generar-pdf-detallado</td>
                        </tr>
                        <tr>
                            <th>PDF Rentabilidad</th>
                            <td><span class="endpoint-badge method-post">POST</span> /reportes-facturacion/rentabilidad-producto/generar-pdf</td>
                        </tr>
                        <tr>
                            <th>PDF por Documento</th>
                            <td><span class="endpoint-badge method-post">POST</span> /reportes-facturacion/rentabilidad-documento/generar-pdf</td>
                        </tr>
                        <tr>
                            <th>PDF Ventas Cliente</th>
                            <td><span class="endpoint-badge method-post">POST</span> /reportes-facturacion/ventas-cliente/pdf</td>
                        </tr>
                    </table>
                </div>
            </div>

            <!-- Integraci√≥n con Otros M√≥dulos -->
            <div class="card">
                <h2>üîó Integraci√≥n con Otros M√≥dulos</h2>
                <p>Integraci√≥n seamless con otros m√≥dulos del sistema para un flujo de trabajo completo.</p>
                
                <h3>M√≥dulos Integrados</h3>
                <div class="feature-grid">
                    <div class="feature-item">
                        <h5>Cotizaciones</h5>
                        <p>Conversi√≥n directa de cotizaciones a facturas</p>
                    </div>
                    <div class="feature-item">
                        <h5>Remisiones</h5>
                        <p>Facturaci√≥n de productos ya despachados</p>
                    </div>
                    <div class="feature-item">
                        <h5>Inventario</h5>
                        <p>Actualizaci√≥n autom√°tica de stock y kardex</p>
                    </div>
                    <div class="feature-item">
                        <h5>Contabilidad</h5>
                        <p>Asientos contables autom√°ticos</p>
                    </div>
                    <div class="feature-item">
                        <h5>Cartera</h5>
                        <p>Generaci√≥n de cuentas por cobrar</p>
                    </div>
                    <div class="feature-item">
                        <h5>Terceros</h5>
                        <p>Validaci√≥n y gesti√≥n de clientes</p>
                    </div>
                </div>

                <div class="warning-box">
                    <h4>‚ö†Ô∏è Dependencias del Sistema</h4>
                    <p>El m√≥dulo requiere configuraci√≥n previa de: tipos de documento, cuentas contables, 
                    productos con grupos de inventario, impuestos y bodegas.</p>
                </div>
            </div>

            <!-- Validaciones y Controles -->
            <div class="card">
                <h2>üõ°Ô∏è Validaciones y Controles</h2>
                <p>Sistema robusto de validaciones para garantizar la integridad de los datos y procesos.</p>
                
                <h3>Validaciones Implementadas</h3>
                <ul class="feature-list">
                    <li>Validaci√≥n de existencia de cliente</li>
                    <li>Verificaci√≥n de configuraci√≥n contable</li>
                    <li>Control de stock disponible</li>
                    <li>Validaci√≥n de fechas de vencimiento</li>
                    <li>Verificaci√≥n de permisos de usuario</li>
                    <li>Control de integridad de datos</li>
                </ul>

                <div class="tech-specs">
                    <h4>üîß Controles de Negocio</h4>
                    <table class="spec-table">
                        <tr>
                            <th>Stock Insuficiente</th>
                            <td>HTTP 409 - Conflict</td>
                        </tr>
                        <tr>
                            <th>Cliente No Encontrado</th>
                            <td>HTTP 404 - Not Found</td>
                        </tr>
                        <tr>
                            <th>Configuraci√≥n Faltante</th>
                            <td>HTTP 409 - Conflict</td>
                        </tr>
                        <tr>
                            <th>Fecha Inv√°lida</th>
                            <td>HTTP 400 - Bad Request</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="stats-grid">
            <div class="stat-item">
                <span class="stat-number">15+</span>
                <span class="stat-label">Endpoints API</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">8</span>
                <span class="stat-label">Tipos de Reportes</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">100%</span>
                <span class="stat-label">Integraci√≥n Contable</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">4</span>
                <span class="stat-label">Formatos PDF</span>
            </div>
        </div>

        <!-- Conclusion -->
        <div class="conclusion">
            <h2>üéØ Resumen del M√≥dulo</h2>
            <p>
                El M√≥dulo de Facturaci√≥n de Finaxis es una soluci√≥n integral que automatiza completamente el proceso 
                de facturaci√≥n de ventas, desde la creaci√≥n del documento hasta la generaci√≥n de asientos contables 
                y reportes de rentabilidad. Con validaciones robustas, integraci√≥n seamless con otros m√≥dulos y 
                herramientas avanzadas de an√°lisis, proporciona todo lo necesario para una gesti√≥n comercial eficiente 
                y confiable.
            </p>
            <p>
                <strong>Beneficios clave:</strong> Automatizaci√≥n completa, control de inventario en tiempo real, 
                an√°lisis de rentabilidad detallado, reportes profesionales en PDF y cumplimiento de normativas contables colombianas.
            </p>
        </div>
    </div>
</body>
</html>